import _export from '../internals/export.js';
import fails$1 from '../internals/fails.js';
import toObject$1 from '../internals/to-object.js';
import toPrimitive$1 from '../internals/to-primitive.js';

var $ = _export;
var fails = fails$1;
var toObject = toObject$1;
var toPrimitive = toPrimitive$1;
var FORCED = fails(function () {
  return new Date(NaN).toJSON() !== null || Date.prototype.toJSON.call({
    toISOString: function () {
      return 1;
    }
  }) !== 1;
}); // `Date.prototype.toJSON` method
// https://tc39.es/ecma262/#sec-date.prototype.tojson

$({
  target: 'Date',
  proto: true,
  arity: 1,
  forced: FORCED
}, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  toJSON: function toJSON(key) {
    var O = toObject(this);
    var pv = toPrimitive(O, 'number');
    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();
  }
});

import _export from '../internals/export.js';
import global$1 from '../internals/global.js';
import microtask$1 from '../internals/microtask.js';
import aCallable$1 from '../internals/a-callable.js';
import validateArgumentsLength$1 from '../internals/validate-arguments-length.js';
import engineIsNode from '../internals/engine-is-node.js';

var $ = _export;
var global = global$1;
var microtask = microtask$1;
var aCallable = aCallable$1;
var validateArgumentsLength = validateArgumentsLength$1;
var IS_NODE = engineIsNode;
var process = global.process; // `queueMicrotask` method
// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-queuemicrotask

$({
  global: true,
  enumerable: true,
  noTargetGet: true
}, {
  queueMicrotask: function queueMicrotask(fn) {
    validateArgumentsLength(arguments.length, 1);
    aCallable(fn);
    var domain = IS_NODE && process.domain;
    microtask(domain ? domain.bind(fn) : fn);
  }
});
